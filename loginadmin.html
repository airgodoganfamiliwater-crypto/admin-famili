<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#14b8a6">
<link rel="icon" href="ikon-512.png">
<title>Admin Login Panel</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
/* ================= GENERAL ================= */
* {
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

body{
  margin:0;
  min-height:100vh;
  padding: 20px;
  background:
    radial-gradient(circle at top left, rgba(20,184,166,.15), transparent 50%),
    radial-gradient(circle at bottom right, rgba(251,146,60,.1), transparent 50%),
    linear-gradient(135deg, #f3f4f6, #e0f2fe);
  display:flex;
  justify-content:center;
  align-items:center;
  color: var(--text);
}

/* ================= THEME ================= */
:root{
  --primary:#14b8a6;      /* Biru kehijauan futuristik */
  --accent:#fb923c;       /* Oranye aksen */
  --bg:#f3f4f6;           /* Latar belakang cerah */
  --card:#ffffff;         /* Card putih bersih */
  --border:#d1d5db;       /* Border abu lembut */
  --text:#1f2937;         /* Teks utama gelap lembut */
  --muted:#6b7280;        /* Teks sekunder */
  --glow:0 0 20px rgba(20,184,166,.2);
}

/* ================= LOGIN CARD ================= */
.login{
  background: var(--card);
  border: 1px solid var(--border);
  backdrop-filter: blur(12px);
  border-radius: 22px;
  padding: 30px;
  width: 100%;
  max-width: 420px;
  box-shadow: 0 20px 50px rgba(0,0,0,.1), var(--glow);
  animation: fadeUp .6s ease;
}

/* ================= ANIMATIONS ================= */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px);}
  to{opacity:1;}
}

@keyframes pulse{
  0%{ box-shadow:0 0 10px rgba(20,184,166,.2);}
  50%{ box-shadow:0 0 30px rgba(20,184,166,.5);}
  100%{ box-shadow:0 0 10px rgba(20,184,166,.2);}
}

/* ================= LOGO ================= */
.logo-wrap{
  display:flex;
  justify-content:center;
  margin-bottom:18px;
}

.logo-admin{
  width:90px;
  height:90px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid var(--primary);
  background:#e0f2fe;
  padding:4px;
  box-shadow:0 0 20px rgba(20,184,166,.35);
  animation: pulse 3s infinite;
}

/* ================= TITLE ================= */
h2{
  text-align:center;
  font-weight:800;
  margin-bottom:20px;
  color: var(--primary);
  letter-spacing: .5px;
}

/* ================= INPUT ================= */
input{
  width:100%;
  padding:12px 14px;
  margin:10px 0;
  border-radius:14px;
  border:1px solid var(--border);
  background:#f9fafb;
  color: var(--text);
  font-size:14px;
  transition:0.3s;
}

input:focus{
  border-color: var(--primary);
  box-shadow: 0 0 10px rgba(20,184,166,.2);
}

input::placeholder{
  color: var(--muted);
}

/* ================= BUTTON ================= */
button{
  width:100%;
  margin-top:14px;
  padding:12px;
  border:none;
  border-radius:14px;
  background: linear-gradient(135deg, var(--primary), #22d3ee);
  color:#fff;
  font-weight:800;
  cursor:pointer;
  transition: all .25s ease;
  box-shadow:0 10px 22px rgba(20,184,166,.2);
}

button:hover{
  transform: translateY(-2px);
  box-shadow:0 16px 30px rgba(20,184,166,.35);
}

/* ================= ERROR ================= */
.error{
  margin-top:12px;
  font-size:13px;
  color:#ef4444;
  text-align:center;
}

/* ================= FUTURISTIC EFFECTS ================= */
.login::before{
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  border-radius:22px;
  background: linear-gradient(45deg, rgba(20,184,166,.05), rgba(251,146,60,.05));
  pointer-events:none;
}

/* ================= RESPONSIVE ================= */
@media (max-width:480px){
  .login{
    padding:20px;
  }
  .logo-admin{
    width:70px;
    height:70px;
  }
}
</style>
</head>

<body>

<div class="login">

  <!-- LOGO -->
  <div class="logo-wrap">
    <img src="logofw.png" class="logo-admin">
  </div>

  <h2>Login Admin</h2>

  <input type="email" id="email" placeholder="Email Admin">
  <input type="password" id="password" placeholder="Password">

  <button id="loginBtn">Masuk Dashboard</button>
  <p class="error" id="errorMsg"></p>
</div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCl13_a4x-BQnWNUjf9JOQX1DKc-HxLBys",
    authDomain: "klien-39696.firebaseapp.com",
    projectId: "klien-39696",
    storageBucket: "klien-39696.firebasestorage.app",
    messagingSenderId: "434516298894",
    appId: "1:434516298894:web:fad97694415bd4237acddf"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  const loginBtn = document.getElementById('loginBtn');
  const errorMsg = document.getElementById('errorMsg');

  loginBtn.addEventListener('click', async () => {
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();

    try {
      const userCredential = await auth.signInWithEmailAndPassword(email, password);
      const uid = userCredential.user.uid;

      // cek di collection admins
      const adminDoc = await db.collection('admins').doc(uid).get();

      if(adminDoc.exists){
        const adminData = adminDoc.data();
        if(adminData.role === "admin" && adminData.status === "approved"){
          window.location.href = "index.html";
        } else {
          errorMsg.textContent = "Akun admin belum approved / role tidak valid.";
          await auth.signOut();
        }
      } else {
        errorMsg.textContent = "Akun bukan admin.";
        await auth.signOut();
      }
    } catch (err) {
      errorMsg.textContent = "Login gagal: " + err.message;
    }
  });
</script>

</body>
</html>